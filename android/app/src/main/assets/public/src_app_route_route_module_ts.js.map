{"version":3,"file":"src_app_route_route_module_ts.js","mappings":"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","sources":["./src/app/map/map.component.ts","./src/app/route-settings/route-settings.component.ts","./src/app/route/route-routing.module.ts","./src/app/route/route.module.ts","./src/app/route/route.page.ts","./src/app/services/SQLite.service.ts","./src/app/services/firestore/firestore.service.ts","./src/app/timetable/timetable.component.ts","./node_modules/firebase/firestore/dist/index.esm.js"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-map',\r\n  templateUrl: './map.component.html',\r\n  styleUrls: ['./map.component.scss'],\r\n})\r\nexport class MapComponent implements OnInit {\r\n\r\n  @Input() routeImage: string;\r\n  constructor() { }\r\n\r\n  ngOnInit() {}\r\n\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { SQLiteService } from '../services/SQLite.service';\r\nimport { ToastController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-route-settings',\r\n  templateUrl: './route-settings.component.html',\r\n  styleUrls: ['./route-settings.component.scss']\r\n})\r\nexport class RouteSettingsComponent implements OnInit {\r\n  @Input() routeId !: string;\r\n  @Input() routeData !: any;\r\n  @Input() numberOfPeople !: number;\r\n  @Input() date !: string;\r\n  @Input() startingTime !: string;\r\n\r\n  constructor(\r\n    private db: SQLiteService,\r\n    private toast: ToastController,\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.db.dbState().subscribe((res) => {\r\n      if(res){\r\n        this.db.fetchRoutes().subscribe(item => {\r\n          \r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  storeData() {\r\n    \r\n    this.db.addFavRoute(\r\n      this.routeId,\r\n      this.routeData\r\n    )\r\n  }\r\n\r\n  /*deleteSong(id){\r\n    this.db.deleteSong(id).then(async(res) => {\r\n      let toast = await this.toast.create({\r\n        message: 'Song deleted',\r\n        duration: 2500\r\n      });\r\n      toast.present();      \r\n    })\r\n  }*/\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RoutePage } from './route.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RoutePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RoutePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RoutePageRoutingModule } from './route-routing.module';\r\n\r\nimport { RoutePage } from './route.page';\r\nimport { TimetableComponent } from '../timetable/timetable.component';\r\nimport { RouteSettingsComponent } from '../route-settings/route-settings.component';\r\nimport { MapComponent } from '../map/map.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RoutePageRoutingModule\r\n  ],\r\n  declarations: [RoutePage, TimetableComponent, RouteSettingsComponent, MapComponent]\r\n})\r\nexport class RoutePageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { switchMap } from 'rxjs/operators';\r\nimport {FirestoreService} from \"../services/firestore/firestore.service\";\r\n\r\n\r\n\r\nexport interface Route {\r\n  routeId: number;\r\n  routeName: string;\r\n  numberOfPeople: number;\r\n  price: number;\r\n  thumbnailPath: string;\r\n  dateAvailability: string[];\r\n  publishDate: string;\r\n  activities: number[];\r\n  startTime: string\r\n}\r\n\r\n@Component({\r\n  selector: 'app-route',\r\n  templateUrl: './route.page.html',\r\n  styleUrls: ['./route.page.scss'],\r\n})\r\n\r\n\r\nexport class RoutePage implements OnInit {\r\n\r\n  routeParams = this.route.snapshot.paramMap.get('id');\r\n  routeId !: string;\r\n  routeData : any;\r\n\r\n\r\n  constructor(private route: ActivatedRoute, private firestoreService: FirestoreService) {   \r\n  }\r\n\r\n  ngOnInit(): void {\r\n    \r\n    this.firestoreService.getRoute(this.routeParams).subscribe(route => {\r\n      this.routeData = route.payload.data();\r\n      this.routeId = route.payload.id;\r\n    })\r\n    \r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Platform } from '@ionic/angular';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite/ngx';\r\nimport { Route } from '../models/route';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SQLiteService {\r\n  private storage: SQLiteObject;\r\n  routeList = new BehaviorSubject([]);\r\n\r\n  private isDbReady: BehaviorSubject<boolean> = new BehaviorSubject(false);\r\n\r\n  constructor(\r\n    private platform: Platform, \r\n    private sqlite: SQLite, \r\n\r\n  ) {\r\n    this.platform.ready().then(() => {\r\n      this.sqlite.create({\r\n        name: 'favouriteRoutes.db',\r\n        location: 'default'\r\n      })\r\n      .then((db: SQLiteObject) => {\r\n          this.storage = db;\r\n          this.createTableFavRoutes();\r\n      });\r\n    });\r\n  }\r\n\r\n  createTableFavRoutes(): void{\r\n    var sql = 'create table IF NOT EXISTS favRoutes(id INTEGER PRIMARY KEY AUTOINCREMENT,routeId TEXT, route TEXT)';\r\n    this.storage.executeSql(sql,[])\r\n      .then(() => {\r\n        console.log(\"Tabla de favoritos creada satisfactoriamente.\");\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  dbState() {\r\n    return this.isDbReady.asObservable();\r\n  }\r\n \r\n  fetchRoutes(): Observable<Route[]> {\r\n    return this.routeList.asObservable();\r\n  }\r\n\r\n  async getFavRoutes(){\r\n    return this.storage.executeSql('SELECT * FROM favRoutes', []).then(res => {\r\n      let route: Route[] = [];\r\n      if (res.rows.length > 0) {\r\n        for (var i = 0; i < res.rows.length; i++) { \r\n          console.log(res.rows.item(i).id);\r\n        }\r\n      }\r\n      this.routeList.next(route);\r\n    });\r\n  }\r\n\r\n  // Add\r\n  async addFavRoute(routeId:string, route:JSON) {\r\n    let data = [routeId, route];\r\n    console.log(data,\"data\");\r\n    return this.storage.executeSql('INSERT INTO favRoutes (routeId, route) VALUES (?, ?)', data)\r\n    .then(_ => {\r\n      this.getFavRoutes();\r\n    });\r\n  }\r\n \r\n  // Delete\r\n  async deleteFavRoute(routeId:string) {\r\n    return this.storage.executeSql('DELETE FROM favRoutes WHERE routeId = ?', [routeId])\r\n    .then(_ => {\r\n      this.getFavRoutes();\r\n    });\r\n  }\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\r\nimport { Observable } from 'rxjs';\r\n//import { Route } from 'src/app/route-page/route-page.component';\r\nimport {\r\n  query,\r\n  collection,\r\n  where,\r\n  documentId,\r\n  getDocs\r\n} from \"firebase/firestore\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class FirestoreService {\r\n\r\n\r\n\r\n  constructor(private firestore: AngularFirestore) { }\r\n\r\n\r\n  public createRoute(data: {\r\n    routeName: string,\r\n    activites: { activityId: number },\r\n    dateAvailability: { date: string },\r\n    numberOfPeople: number,\r\n    price: number,\r\n    publishDate: string,\r\n    startTime: string\r\n  }) {\r\n    return this.firestore.collection('predefinedRoutes').add(data);\r\n  }\r\n\r\n  public createContactForm(form: {\r\n    email: string,\r\n    firstName: string,\r\n    lastName: string,\r\n    messageText: string,\r\n    phoneNumber: number | null,\r\n  }) {\r\n    return this.firestore.collection('contactForms').add(form);\r\n  }\r\n\r\n\r\n  public getRoute(documentId: string) {\r\n    return this.firestore.collection('predefinedRoutes').doc(documentId).snapshotChanges();\r\n  }\r\n\r\n  public getActivitiesById(ids: []) {\r\n    return this.firestore.collection('routeActivities', ref => ref.where(documentId(), \"in\", ids)).valueChanges();\r\n  }\r\n\r\n  public getActivity(documentId: string) {\r\n    return this.firestore.collection('routeActivities').doc(documentId).snapshotChanges();\r\n  }\r\n\r\n  public getRoutes() {\r\n    return this.firestore.collection('predefinedRoutes').snapshotChanges();\r\n\r\n  }\r\n\r\n}","import { Component, Input, OnInit } from '@angular/core';\r\nimport { forkJoin, Observable, Subject } from 'rxjs';\r\nimport { FirestoreService } from '../services/firestore/firestore.service';\r\nimport {\r\n  query,\r\n  collection,\r\n  where,\r\n  documentId,\r\n  getDocs\r\n} from \"firebase/firestore\";\r\n\r\n\r\n@Component({\r\n  selector: 'app-timetable',\r\n  templateUrl: './timetable.component.html',\r\n  styleUrls: ['./timetable.component.scss']\r\n})\r\nexport class TimetableComponent implements OnInit {\r\n  @Input() routeActivities : any;\r\n  @Input() startActivityTime : string;\r\n  \r\n  activities :Array<any> = [];\r\n  displayActivities : Array<any> =[];\r\n//  subject = new Subject<Array<any>>();\r\n// displayActivities = new Observable<Array<any>>();\r\n\r\n  constructor(private firestoreService: FirestoreService) {\r\n  }\r\n    ngOnInit(): void {\r\n      this.getActivitiesData();\r\n    }\r\n\r\n    getActivitiesData(): void{\r\n        this.activities = this.routeActivities;\r\n        let selectedTime = '';\r\n        let startActivity = this.startActivityTime;\r\n\r\n        for(let activity of this.activities){\r\n          let findHour = false;\r\n          \r\n          for(let actualTime of activity.timeAvailability){\r\n            console.log(actualTime, \"actividad\");\r\n            console.log(startActivity, \"startActivity\");\r\n            if(this.hourToInt(actualTime) >= this.hourToInt(startActivity)){\r\n              selectedTime = actualTime;\r\n              startActivity = this.intToHour(this.hourToInt(actualTime)+activity.timeDuration);\r\n              findHour = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          if(findHour){\r\n            this.displayActivities.push(\r\n              {\r\n                name: activity.name,\r\n                selectedTime: selectedTime,\r\n                finishActivity: startActivity\r\n              });\r\n              findHour = false;\r\n          }\r\n        }\r\n    }\r\n\r\n\r\n    hourToInt(hour: string): number {\r\n      return parseInt(hour.split(\":\")[0]);\r\n    }\r\n\r\n    intToHour(hourInt: number): string {\r\n      return hourInt + \":00\";\r\n    }\r\n}\r\n","export * from '@firebase/firestore';\n"],"names":[],"sourceRoot":"webpack:///"}